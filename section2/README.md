# Section2 : Image

### ğŸ“ ëª©ì°¨

	 - Image ë€ ?
	 - ë ˆì´ì–´ ê¸°ë°˜ ì•„í‚¤í…ì²˜ ?
	 - Docker ì‹¤ìŠµ 



## Image

#### Image ?

>  ì½ê¸°/ì“°ê¸° ì•¡ì„¸ìŠ¤ ê¶Œí•œì´ ìˆëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‹¤í–‰í•˜ëŠ” ì»¨í…Œì´ë„ˆì˜ 'ë¸”ë£¨í”„ë¦°íŠ¸'  
>
>  ëª¨ë“  ì„¤ì • ëª…ë ¹ê³¼ ëª¨ë“  ì½”ë“œê°€ í¬í•¨ëœ ê³µìœ  ê°€ëŠ¥í•œ íŒ¨í‚¤ì§€ì´ë©° ì‹¤ì œë¡œ ì½”ë“œì™€ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ”ë° í•„ìš”í•œ ë„êµ¬ ì´ë¯¸ì§€ë¥¼ í†µí•´ ì—¬ëŸ¬ ì»¨í…Œì´ë„ˆ ìƒì„± ê°€ëŠ¥í•˜ë‹¤ .  ì´ë¯¸ì§€ëŠ” ì½ê¸° ì „ìš©ì´ë©°, í•œë²ˆ ë¹Œë“œë˜ë©´ ë³€ê²½ë˜ì§€ ì•ŠëŠ”ë‹¤ -> ë‹¨ìˆœí•˜ê²Œ ì½”ë“œë¥¼ ì—…ë°ì´íŠ¸í•´ì„œ ì™¸ë¶€ì—ì„œ ë³€ê²½í•˜ì§€ ëª»í•˜ê¸°ë•Œë¬¸ì— ë‹¤ì‹œ ë¹Œë“œí•´ì•¼ í•œë‹¤. ë¹Œë“œ í–ˆì„ ê²½ìš°, ì™„ì „ ìƒˆë¡œìš´ ì´ë¯¸ì§€ì´ê³ , ë‹«íŒ í…œí”Œë¦¿ì´ë‹¤. 
>
> ì™¸ë¶€ ì´ë¯¸ì§€ ? : Docker Hub( EX. node docker image)



#### layer ?

> ì‹œìŠ¤í…œì„ ìƒì„±, ë°°í¬, í™•ì¥í•˜ê¸° ìœ„í•œ ê¸°ë³¸ êµ¬ì„± ìš”ì†Œì´ë‹¤.  ë ˆì´ì–´ëŠ” ì´ë¯¸ì§€ë¥¼ êµ¬ì„±í•˜ëŠ” ê²ƒìœ¼ë¡œ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•  ë•Œ í”Œë«í¼ì€ íŒŒì¼ì˜ ê° ëª…ë ¹ì— ëŒ€í•´ ìƒˆ   ë¡œìš´ Layerë¥¼ ë§Œë“ ë‹¤. 



### Layered Architecture

> ê° ê³„ì¸µì€ ì–´í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì—ì„œì˜ íŠ¹ì • ì—­í• ê³¼ ê´€ì‹¬ì‚¬(í™”ë©´í‘œì‹œ, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ìˆ˜í–‰ ë“± )ë³„ë¡œ êµ¬ë¶„ëœë‹¤(Separation of Concern)
>
> ìµœì¢… ëª…ë ¹ ì´ì „ì˜ ëª¨ë“  ëª…ë ¹ì€ ì´ë¯¸ ì´ë¯¸ì§€ì˜ ì¼ë¶€ì´ì§€ë§Œ ë³„ë„ì˜ ë ˆì´ì–´ì´ë‹¤. ì•„ë¬´ê²ƒë„ ë³€ê²½ ì•ˆë˜ë©´ ìºì‹œë¥¼ ì‚¬ìš©í•˜ê³ , í•˜ë‚˜ì˜ ë ˆì´ì–´ë¼ë„ ë³€ê²½ë˜ë©´ ëª¨ë“  í›„ì† ë ˆì´ì–´ë„ ë‹¤ì‹œ ì‹¤í–‰ëœë‹¤
>
> ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•  ë•Œë§ˆë‹¤, ë„ì»¤ëŠ” ëª¨ë“  ëª…ë ¹ ê²°ê³¼ë¥¼ ìºì‹œí•˜ê³  ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ê³  ë³€ê²½ëœ ê²ƒì´ ì—†ìœ¼ë©´ ìºì‹œëœ ê²°ê³¼ë¥¼ ì‚¬ìš©.  ë ˆì´ì–´ ê¸°ë°˜ ì•„í‚¤í…ì²˜ 
>
> Using cache : ë„ì»¤ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì´ ëª…ë ¹ì–´ê°€ ì´ì „ê³¼ ë™ì¼í•˜ë‹¤ê³  ì¸ì‹í•˜ë©´ ê±°ì¹ í•„ìš”ê°€ ì—†ë‹¤ê³  ì¶”ë¡ í•¨..





## ğŸ’»Docker ì‹¤ìŠµ

 **- ì‹¤ìŠµ ì˜ˆì œ**

```dockerfile
FROM node # ë…¸ë“œ ì´ë¯¸ì§€ êµ¬ì¶• 


COPY package.json /app  # app í´ë”ì— ë³µì‚¬í•´ì„œ ì†ŒìŠ¤ì½”ë“œë¥¼ ë³µì‚¬í•˜ê¸° ì „ì— ì‚¬ìš©í•˜ì—¬ npm install ë˜ëŠ” ê²ƒì„ ë§‰ìŒ
# npm install ì´ ê³„ì†í•´ì„œ ì‹¤í–‰ë˜ëŠ” ê²ƒì€ ë„ˆë¬´ ë¹„íš¨ìœ¨ì ì´ë‹ˆê¹Œ ì„±ëŠ¥ì´ ë” ì¢‹ì•„ì§. 
RUN npm install # RUNì€ ì´ë¯¸ì§€ì— ëª…ë ¹ 
#Run node server.js # ëª¨ë“  ê±° ì™„ë£Œë˜ë©´ ì„œë²„ ì‹¤í–‰ 

# ì´ ì•„ë˜ ë ˆì´ì–´ë“¤ë§Œ ì‹¤í–‰ 
COPY . /app# ë‘ ê°œì˜ ê²½ë¡œ ì§€ì •, ì²«ë²ˆì§¸ëŠ” ì»¨í…Œì´ë„ˆì˜ ì™¸ë¶€, ì´ë¯¸ì§€ì˜ ì™¸ë¶€ ê²½ë¡œ(ì´ë¯¸ì§€ë¡œ ë³µì‚¬ë˜ì–´ì•¼ í•  íŒŒì¼ë“¤ì´ ìˆëŠ” ê³³ )
# . ì´ ìˆìŒã„´ ì´ëŠ” ë„ì»¤ì—ê²Œ ê¸°ë³¸ì ìœ¼ë¡œ Dockerfileì´ í¬í•¨ëœ ë™ì¼í•œ í´ë”ë¥¼ ë³µì‚¬í•´ì•¼í•œë‹¤ê³  Dockerì—ê²Œ ì•Œë¦¼ , Dockerfileì€ ì œì™¸ 
# ë‘ë²ˆì§¸ . ì€ ê·¸ íŒŒì¼ì„ ì €ì¥í•´ì•¼ í•˜ëŠ” ì´ë¯¸ì§€ ë‚´ë¶€ì˜ ê²½ë¡œ. 
# if COPY . /app , -> Dockerfileì— ëª¨ë“  íŒŒì¼ê³¼ ëª¨ë“  í•˜ìœ„ í´ë”ê°€ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì˜ /app í´ë”ì— ë³µì‚¬ë¨. í´ë”ê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, ì´ë¯¸ì§€ì™€ ì»¨í…Œì´ë„ˆì— ìƒì„± 

EXPOSE 80
# ì»¨í…Œì´ë„ˆê°€ ì‹œì‘ë  ë•Œ, íŠ¹ì • í¬íŠ¸ë¥¼ ë…¸ì¶œí•˜ê¸° ìœ„í•´ ì„¤ì • 80
# ì»¨í…Œì´ë„ˆ í”„ë¡œì„¸ìŠ¤ê°€ ì´ í¬íŠ¸ë¥¼ ë…¸ì¶œí•  ê²ƒì„ì„ ë¬¸ì„œí™” í•˜ëŠ” ê²ƒ 
# ì´ ëª…ë ¹ì–´ë¥¼ ì•ˆ ì“´ë‹¤ë©´ docker run -p 80 ID ì´ëŸ° ì‹ìœ¼ë¡œ í¬íŠ¸ ì„¤ì • 

CMD ["node","server.js "] # ë„ì»¤ì—ê²Œ ì´ë¯¸ì§€ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì»¨í…Œì´ë„ˆê°€ ìƒì„±ë  ë•Œë§ˆë‹¤ 
# ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì— node ëª…ë ¹ì„ ì‚¬ìš©í•´ì„œ server.js ì‹¤í–‰í•˜ë¼ ëœ» 
# CMDë¥¼ ì„¤ì •í•´ì£¼ì§€ì•Šìœ¼ë©´ base ì´ë¯¸ì§€ ì‹œí–‰ ì—†ëŠ” ê²½ìš°, ì—ëŸ¬ 

docker build .# Dockerfileì˜ ëª…ë ¹ìœ¼ë¡œ ì´ë¯¸ì§€ ë§Œë“¦
# . ì€ Dockerfile ìœ„ì¹˜ê°€ ë™ì¼í•œ íŒŒì¼ì— ì¡´ì¬í•˜ëŠ” ê±¸ ì•Œë ¤ì¤Œ

docker run ì´ë¯¸ì§€ ID

docker run node # docker hubì— ìˆëŠ” ê³µì‹ì ìœ¼ë¡œ ë…¸ë“œ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì™€ì„œ  ì»¨í…Œì´ë„ˆë¥¼ ë§Œë“¤ì–´ ì‹¤í–‰í•˜ëŠ” ê²ƒ 

#docker ps(í”„ë¡œì„¸ìŠ¤) -a(ë„ì»¤ê°€ ìƒì„±í•œ ëª¨ë“ [all] ì»¨í…Œì´ë„ˆ í”„ë¡œì„¸ìŠ¤ í‘œì‹œ)

docker run -it node 
#(ë„ì»¤ì—ê²Œ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ í˜¸ìŠ¤íŒ… ë¨¸ì‹ ìœ¼ë¡œ ëŒ€í™”í˜• ì„¸ì…˜ì„ ë…¸ì¶œí•˜ê³  ì‹¶ë‹¤ -> ì‹¤ì œ ë…¸ë“œ ëª…ë ¹ì–´ ì‚¬ìš© ê°€ëŠ¥ ) ë…¸ë“œê°€ ìƒì„±ëœ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ ì‹¤í–‰ ê°€ëŠ¥
```



#### ì°¸ê³ ìë£Œ ë° ì¶œì²˜

[ê³„ì¸µí™” ì•„í‚¤í…ì²˜ (Layered Architecture) (hudi.blog)](https://hudi.blog/layered-architecture/)

[What Are Docker Image Layers? | Packagecloud Blog](https://blog.packagecloud.io/what-are-docker-image-layers/#:~:text=Docker Layer Overview Docker is a containerization platform,in the kernels to run multiple isolated containers.)

